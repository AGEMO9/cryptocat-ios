//
//  TBLoginViewController.m
//  Cryptocat
//
//  Created by Thomas Balthazar on 21/10/13.
//  Copyright (c) 2013 Thomas Balthazar. All rights reserved.
//

#import "TBLoginViewController.h"
#import "TBChatViewController.h"

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
@interface TBLoginViewController ()

@property (weak, nonatomic) IBOutlet UITextField *conversationNameField;
@property (weak, nonatomic) IBOutlet UITextField *nicknameField;
@property (weak, nonatomic) IBOutlet UIButton *connectButton;

- (IBAction)connect:(id)sender;

@end

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
@implementation TBLoginViewController

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark -
#pragma mark Lifecycle

////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)didReceiveMemoryWarning {
  [super didReceiveMemoryWarning];
}

////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)viewDidLoad {
  [super viewDidLoad];
  
  self.title = @"Cryptocat";
  self.conversationNameField.placeholder = NSLocalizedString(@"Conversation Name",
                                                             @"Conversation Name Field Placeholder");
  self.nicknameField.placeholder = NSLocalizedString(@"Nickname", @"Nickname Field Placeholder");
  [self.connectButton setTitle:NSLocalizedString(@"Connect", @"Connect Button Title")
                      forState:UIControlStateNormal];
  
#if DEBUG
  self.conversationNameField.text = @"cryptocatdev";
  self.nicknameField.text = @"iOSTestApp";
#endif
}

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark -
#pragma mark Actions

////////////////////////////////////////////////////////////////////////////////////////////////////
- (IBAction)connect:(id)sender {
  if ([self.delegate
       respondsToSelector:@selector(loginController:didAskToConnectWithRoomName:nickname:)]) {
    [self.delegate loginController:self
       didAskToConnectWithRoomName:self.conversationNameField.text
                          nickname:self.nicknameField.text];
  }
}

@end
